# Phase 3 å®æ–½è®¡åˆ’ï¼šç­–ç•¥ä¼˜åŒ–ä¸ç®¡ç†

**å¼€å§‹æ—¥æœŸ**: 2026-02-14  
**é¢„è®¡æ—¶é—´**: 3-4å‘¨  
**ç›®æ ‡**: å®ç°ç­–ç•¥å‚æ•°ä¼˜åŒ–ã€å¤šç­–ç•¥å›æµ‹ã€ç­–ç•¥æ± ç®¡ç†

---

## ğŸ“‹ Phase 3 ç›®æ ‡

æ ¹æ® `PLAN.md`ï¼ŒPhase 3 çš„ç›®æ ‡æ˜¯ï¼š

1. **ç­–ç•¥ç®¡ç†ç³»ç»Ÿ**
   - ç­–ç•¥CRUDæ¥å£
   - ç­–ç•¥åˆ†ç»„å’Œæ ‡ç­¾ç³»ç»Ÿ
   - ç­–ç•¥å‚æ•°é…ç½®æ¨¡æ¿
   - ç­–ç•¥ç»©æ•ˆç»Ÿè®¡

2. **å‚æ•°ä¼˜åŒ–å¼•æ“**
   - ç½‘æ ¼æœç´¢ä¼˜åŒ–å™¨
   - é—ä¼ ç®—æ³•ä¼˜åŒ–å™¨
   - è´å¶æ–¯ä¼˜åŒ–å™¨

3. **å¤šç­–ç•¥å›æµ‹**
   - å¹¶è¡Œå›æµ‹å¼•æ“
   - ç­–ç•¥ç›¸å…³æ€§åˆ†æ
   - è¯¦ç»†ç»©æ•ˆæŒ‡æ ‡ç»Ÿè®¡
   - ä¼˜åŒ–ç»“æœå¯è§†åŒ–

---

## ğŸ¯ å®æ–½æ­¥éª¤

### ç¬¬1æ­¥ï¼šç­–ç•¥ç®¡ç†ç³»ç»Ÿåç«¯

#### 1.1 æ•°æ®åº“æ¨¡å‹

**æ–‡ä»¶**: `backend/models/strategy.py`

**æ¨¡å‹**:
- `Strategy` - ç­–ç•¥åŸºæœ¬ä¿¡æ¯
- `StrategyGroup` - ç­–ç•¥åˆ†ç»„
- `StrategyTag` - ç­–ç•¥æ ‡ç­¾
- `StrategyParamTemplate` - å‚æ•°æ¨¡æ¿

#### 1.2 ç­–ç•¥APIç«¯ç‚¹

**æ–‡ä»¶**: `backend/api/strategies.py`

**ç«¯ç‚¹**:
- `GET /api/v1/strategies` - è·å–ç­–ç•¥åˆ—è¡¨
- `POST /api/v1/strategies` - åˆ›å»ºç­–ç•¥
- `GET /api/v1/strategies/{id}` - è·å–ç­–ç•¥è¯¦æƒ…
- `PUT /api/v1/strategies/{id}` - æ›´æ–°ç­–ç•¥
- `DELETE /api/v1/strategies/{id}` - åˆ é™¤ç­–ç•¥
- `GET /api/v1/strategies/groups` - è·å–ç­–ç•¥åˆ†ç»„
- `POST /api/v1/strategies/groups` - åˆ›å»ºç­–ç•¥åˆ†ç»„
- `GET /api/v1/strategies/performance/{id}` - è·å–ç­–ç•¥ç»©æ•ˆ

#### 1.3 ç­–ç•¥æœåŠ¡

**æ–‡ä»¶**: `backend/services/strategy_service.py`

**åŠŸèƒ½**:
- ç­–ç•¥CRUDæ“ä½œ
- ç­–ç•¥åˆ†ç»„ç®¡ç†
- ç­–ç•¥ç»©æ•ˆè®¡ç®—
- ç­–ç•¥ç»Ÿè®¡

---

### ç¬¬2æ­¥ï¼šå‚æ•°ä¼˜åŒ–å¼•æ“

#### 2.1 ä¼˜åŒ–å™¨åŸºç±»

**æ–‡ä»¶**: `backend/optimizers/base_optimizer.py`

**åŠŸèƒ½**:
- ä¼˜åŒ–å™¨æ¥å£å®šä¹‰
- é€šç”¨ä¼˜åŒ–é€»è¾‘
- ç»“æœæ ‡å‡†åŒ–

#### 2.2 ç½‘æ ¼æœç´¢ä¼˜åŒ–å™¨

**æ–‡ä»¶**: `backend/optimizers/grid_search.py`

**åŠŸèƒ½**:
- éå†æ‰€æœ‰å‚æ•°ç»„åˆ
- å¹¶è¡Œæ‰§è¡Œå›æµ‹
- æ‰¾åˆ°æœ€ä¼˜å‚æ•°

**ç‰¹ç‚¹**:
- ç®€å•ç›´æ¥
- é€‚åˆå‚æ•°ç©ºé—´è¾ƒå°çš„æƒ…å†µ
- ä¿è¯æ‰¾åˆ°å…¨å±€æœ€ä¼˜

#### 2.3 é—ä¼ ç®—æ³•ä¼˜åŒ–å™¨

**æ–‡ä»¶**: `backend/optimizers/genetic.py`

**åŠŸèƒ½**:
- åˆå§‹åŒ–ç§ç¾¤
- é€‰æ‹©ã€äº¤å‰ã€å˜å¼‚
- è¿›åŒ–è¿­ä»£

**ç‰¹ç‚¹**:
- é€‚åˆå‚æ•°ç©ºé—´è¾ƒå¤§çš„æƒ…å†µ
- æ”¯æŒå¤šç›®æ ‡ä¼˜åŒ–
- å¯èƒ½é™·å…¥å±€éƒ¨æœ€ä¼˜

#### 2.4 è´å¶æ–¯ä¼˜åŒ–å™¨

**æ–‡ä»¶**: `backend/optimizers/bayesian.py`

**åŠŸèƒ½**:
- æ„å»ºæ¦‚ç‡æ¨¡å‹
- é‡‡æ ·æœ€ä¼˜ç‚¹
- æ›´æ–°æ¨¡å‹

**ç‰¹ç‚¹**:
- æ ·æœ¬æ•ˆç‡é«˜
- é€‚åˆè¯„ä¼°æˆæœ¬é«˜çš„æƒ…å†µ
- éœ€è¦è¾ƒå¤šæ ·æœ¬

#### 2.5 ä¼˜åŒ–æœåŠ¡

**æ–‡ä»¶**: `backend/services/optimization_service.py`

**åŠŸèƒ½**:
- ç»Ÿä¸€ä¼˜åŒ–æ¥å£
- ä¼˜åŒ–ä»»åŠ¡ç®¡ç†
- ç»“æœå­˜å‚¨

---

### ç¬¬3æ­¥ï¼šå¹¶è¡Œå›æµ‹å¼•æ“

#### 3.1 å›æµ‹å¼•æ“æ”¹è¿›

**æ–‡ä»¶**: `backend/services/backtest_service.py`

**æ”¹è¿›**:
- æ”¯æŒå¹¶è¡Œå›æµ‹
- å¼‚æ­¥å›æµ‹æ‰§è¡Œ
- ç»“æœèšåˆ

#### 3.2 ç­–ç•¥ç›¸å…³æ€§åˆ†æ

**æ–‡ä»¶**: `backend/services/correlation_service.py`

**åŠŸèƒ½**:
- è®¡ç®—ç­–ç•¥ç›¸å…³æ€§çŸ©é˜µ
- è¯†åˆ«ç›¸å…³æ€§é«˜çš„ç­–ç•¥
- ç”Ÿæˆç»„åˆå»ºè®®

#### 3.3 ç»©æ•ˆæŒ‡æ ‡è®¡ç®—

**æ–‡ä»¶**: `backend/utils/performance.py`

**æŒ‡æ ‡**:
- æ€»æ”¶ç›Šç‡
- å¹´åŒ–æ”¶ç›Šç‡
- æœ€å¤§å›æ’¤
- å¤æ™®æ¯”ç‡
- å¡å°”ç›æ¯”ç‡
- èƒœç‡
- ç›ˆäºæ¯”
- æ³¢åŠ¨ç‡
- Alphaå’ŒBeta
- ä¿¡æ¯æ¯”ç‡

---

### ç¬¬4æ­¥ï¼šä¼˜åŒ–APIç«¯ç‚¹

**æ–‡ä»¶**: `backend/api/optimization.py`

**ç«¯ç‚¹**:
- `POST /api/v1/optimization/grid-search` - ç½‘æ ¼æœç´¢
- `POST /api/v1/optimization/genetic` - é—ä¼ ç®—æ³•
- `POST /api/v1/optimization/bayesian` - è´å¶æ–¯ä¼˜åŒ–
- `GET /api/v1/optimization/results/{id}` - è·å–ä¼˜åŒ–ç»“æœ
- `GET /api/v1/optimization/correlation` - ç­–ç•¥ç›¸å…³æ€§

---

### ç¬¬5æ­¥ï¼šå‰ç«¯ç­–ç•¥ç®¡ç†

#### 5.1 ç­–ç•¥åˆ—è¡¨é¡µé¢

**æ–‡ä»¶**: `frontend/src/pages/Strategies.tsx`

**åŠŸèƒ½**:
- ç­–ç•¥åˆ—è¡¨å±•ç¤º
- ç­–ç•¥åˆ†ç»„è¿‡æ»¤
- æœç´¢å’Œæ’åº
- å¿«é€Ÿæ“ä½œï¼ˆç¼–è¾‘ã€åˆ é™¤ã€å›æµ‹ã€ä¼˜åŒ–ï¼‰

#### 5.2 ç­–ç•¥åˆ›å»º/ç¼–è¾‘è¡¨å•

**æ–‡ä»¶**: `frontend/src/components/strategy/StrategyForm.tsx`

**åŠŸèƒ½**:
- ç­–ç•¥åŸºæœ¬ä¿¡æ¯
- å‚æ•°é…ç½®
- åˆ†ç»„å’Œæ ‡ç­¾é€‰æ‹©
- è¡¨å•éªŒè¯

#### 5.3 ç­–ç•¥è¯¦æƒ…é¡µé¢

**æ–‡ä»¶**: `frontend/src/components/strategy/StrategyDetail.tsx`

**åŠŸèƒ½**:
- ç­–ç•¥ä¿¡æ¯å±•ç¤º
- å‚æ•°æ˜¾ç¤º
- ç»©æ•ˆç»Ÿè®¡
- å›æµ‹å†å²
- ä¼˜åŒ–å†å²

---

### ç¬¬6æ­¥ï¼šå‰ç«¯ä¼˜åŒ–ç•Œé¢

#### 6.1 å‚æ•°ä¼˜åŒ–é…ç½®

**æ–‡ä»¶**: `frontend/src/components/optimization/OptimizationConfig.tsx`

**åŠŸèƒ½**:
- é€‰æ‹©ä¼˜åŒ–æ–¹æ³•
- é…ç½®å‚æ•°èŒƒå›´
- è®¾ç½®ä¼˜åŒ–ç›®æ ‡
- é€‰æ‹©å›æµ‹è‚¡ç¥¨å’Œå‘¨æœŸ

#### 6.2 ä¼˜åŒ–è¿›åº¦ç›‘æ§

**æ–‡ä»¶**: `frontend/src/components/optimization/OptimizationProgress.tsx`

**åŠŸèƒ½**:
- å®æ—¶è¿›åº¦æ˜¾ç¤º
- å½“å‰æœ€ä¼˜å‚æ•°
- æ”¶æ•›æ›²çº¿å›¾
- å–æ¶ˆä¼˜åŒ–

#### 6.3 ä¼˜åŒ–ç»“æœå±•ç¤º

**æ–‡ä»¶**: `frontend/src/components/optimization/OptimizationResults.tsx`

**åŠŸèƒ½**:
- æœ€ä¼˜å‚æ•°å±•ç¤º
- å‚æ•°æ•æ„Ÿæ€§åˆ†æ
- ç»©æ•ˆå¯¹æ¯”
- å¯¼å‡ºç»“æœ

---

### ç¬¬7æ­¥ï¼šå¯è§†åŒ–ç»„ä»¶

#### 7.1 ç»©æ•ˆå¯¹æ¯”å›¾è¡¨

**æ–‡ä»¶**: `frontend/src/components/charts/PerformanceComparison.tsx`

**å›¾è¡¨**:
- å‡€å€¼æ›²çº¿å¯¹æ¯”
- å›æ’¤æ›²çº¿å¯¹æ¯”
- æœˆåº¦æ”¶ç›Šçƒ­å›¾

#### 7.2 å‚æ•°æ•æ„Ÿæ€§å›¾è¡¨

**æ–‡ä»¶**: `frontend/src/components/charts/ParameterSensitivity.tsx`

**å›¾è¡¨**:
- å‚æ•°-æ”¶ç›Šçƒ­å›¾
- å‚æ•°-å¤æ™®æ¯”ç‡çƒ­å›¾
- 3Då‚æ•°æ›²é¢

#### 7.3 ç›¸å…³æ€§çŸ©é˜µå›¾è¡¨

**æ–‡ä»¶**: `frontend/src/components/charts/CorrelationMatrix.tsx`

**å›¾è¡¨**:
- ç­–ç•¥ç›¸å…³æ€§çƒ­å›¾
- æ ‘çŠ¶å›¾

---

## ğŸ“Š æ•°æ®åº“è®¾è®¡

### ç­–ç•¥è¡¨ (strategies)

```sql
CREATE TABLE strategies (
    id SERIAL PRIMARY KEY,
    user_id INTEGER REFERENCES users(id),
    name VARCHAR(100) NOT NULL,
    type VARCHAR(50) NOT NULL,
    description TEXT,
    params JSONB,
    status VARCHAR(20) DEFAULT 'active',
    tags TEXT[],
    group_id INTEGER REFERENCES strategy_groups(id),
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW()
);
```

### ç­–ç•¥åˆ†ç»„è¡¨ (strategy_groups)

```sql
CREATE TABLE strategy_groups (
    id SERIAL PRIMARY KEY,
    user_id INTEGER REFERENCES users(id),
    name VARCHAR(100) NOT NULL,
    description TEXT,
    color VARCHAR(20),
    created_at TIMESTAMP DEFAULT NOW()
);
```

### ä¼˜åŒ–ç»“æœè¡¨ (optimization_results)

```sql
CREATE TABLE optimization_results (
    id SERIAL PRIMARY KEY,
    strategy_id INTEGER REFERENCES strategies(id),
    method VARCHAR(50) NOT NULL,
    stock_code VARCHAR(20),
    start_date DATE,
    end_date DATE,
    frequency VARCHAR(10),
    best_params JSONB,
    best_score DECIMAL(10,4),
    all_results JSONB,
    created_at TIMESTAMP DEFAULT NOW()
);
```

---

## ğŸ“ ç›®å½•ç»“æ„

```
backend/
â”œâ”€â”€ optimizers/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ base_optimizer.py    # ä¼˜åŒ–å™¨åŸºç±»
â”‚   â”œâ”€â”€ grid_search.py       # ç½‘æ ¼æœç´¢
â”‚   â”œâ”€â”€ genetic.py          # é—ä¼ ç®—æ³•
â”‚   â””â”€â”€ bayesian.py         # è´å¶æ–¯ä¼˜åŒ–
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ optimization_service.py   # ä¼˜åŒ–æœåŠ¡
â”‚   â”œâ”€â”€ correlation_service.py   # ç›¸å…³æ€§åˆ†æ
â”‚   â””â”€â”€ backtest_service.py     # å›æµ‹æœåŠ¡ï¼ˆæ”¹è¿›ï¼‰
â”œâ”€â”€ utils/
â”‚   â””â”€â”€ performance.py      # ç»©æ•ˆæŒ‡æ ‡è®¡ç®—
â”œâ”€â”€ api/
â”‚   â””â”€â”€ optimization.py     # ä¼˜åŒ–API
â””â”€â”€ models/
    â””â”€â”€ strategy.py        # ç­–ç•¥æ¨¡å‹ï¼ˆæ‰©å±•ï¼‰

frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ strategy/
â”‚   â”‚   â”‚   â”œâ”€â”€ StrategyForm.tsx
â”‚   â”‚   â”‚   â””â”€â”€ StrategyDetail.tsx
â”‚   â”‚   â”œâ”€â”€ optimization/
â”‚   â”‚   â”‚   â”œâ”€â”€ OptimizationConfig.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ OptimizationProgress.tsx
â”‚   â”‚   â”‚   â””â”€â”€ OptimizationResults.tsx
â”‚   â”‚   â””â”€â”€ charts/
â”‚   â”‚       â”œâ”€â”€ PerformanceComparison.tsx
â”‚   â”‚       â”œâ”€â”€ ParameterSensitivity.tsx
â”‚   â”‚       â””â”€â”€ CorrelationMatrix.tsx
â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â””â”€â”€ Strategies.tsx
â”‚   â””â”€â”€ services/
â”‚       â””â”€â”€ optimization.ts
```

---

## ğŸ¯ éªŒæ”¶æ ‡å‡†

### åŠŸèƒ½éªŒæ”¶

- âœ… ç­–ç•¥CRUDåŠŸèƒ½å®Œæ•´
- âœ… ç­–ç•¥åˆ†ç»„ç®¡ç†æ­£å¸¸
- âœ… ç½‘æ ¼æœç´¢ä¼˜åŒ–å™¨æ­£ç¡®
- âœ… é—ä¼ ç®—æ³•ä¼˜åŒ–å™¨æ­£ç¡®
- âœ… è´å¶æ–¯ä¼˜åŒ–å™¨æ­£ç¡®
- âœ… å¹¶è¡Œå›æµ‹ç¨³å®š
- âœ… ç­–ç•¥ç›¸å…³æ€§åˆ†æå‡†ç¡®
- âœ… ç»©æ•ˆæŒ‡æ ‡è®¡ç®—æ­£ç¡®
- âœ… ä¼˜åŒ–ç»“æœå¯è§†åŒ–æ¸…æ™°

### æ€§èƒ½éªŒæ”¶

- âœ… å•ç­–ç•¥å›æµ‹æ—¶é—´ < 30sï¼ˆ6ä¸ªæœˆæ•°æ®ï¼‰
- âœ… å¹¶è¡Œå›æµ‹10ä¸ªç­–ç•¥ < 60s
- âœ… ç½‘æ ¼æœç´¢ï¼ˆ1000å‚æ•°ç»„åˆï¼‰< 5min
- âœ… é—ä¼ ç®—æ³•ï¼ˆ50ç§ç¾¤Ã—20ä»£ï¼‰< 10min
- âœ… è´å¶æ–¯ä¼˜åŒ–ï¼ˆ100æ¬¡è¿­ä»£ï¼‰< 3min

### è´¨é‡éªŒæ”¶

- âœ… ä¼˜åŒ–ç»“æœæ”¶æ•›
- âœ… å›æµ‹å‡†ç¡®æ€§ > 98%
- âœ… å‚æ•°ä¼˜åŒ–åç­–ç•¥ç»©æ•ˆæå‡ > 5%
- âœ… ä»£ç è¦†ç›–ç‡ > 80%
- âœ… æ‰€æœ‰æµ‹è¯•é€šè¿‡

---

## ğŸ“ å¾…å®Œæˆä»»åŠ¡æ¸…å•

### åç«¯å¼€å‘

- [ ] åˆ›å»ºç­–ç•¥æ¨¡å‹
- [ ] å®ç°ç­–ç•¥CRUD API
- [ ] åˆ›å»ºç­–ç•¥åˆ†ç»„æ¨¡å‹
- [ ] å®ç°ä¼˜åŒ–å™¨åŸºç±»
- [ ] å®ç°ç½‘æ ¼æœç´¢ä¼˜åŒ–å™¨
- [ ] å®ç°é—ä¼ ç®—æ³•ä¼˜åŒ–å™¨
- [ ] å®ç°è´å¶æ–¯ä¼˜åŒ–å™¨
- [ ] å®ç°ä¼˜åŒ–æœåŠ¡
- [ ] å®ç°å¹¶è¡Œå›æµ‹
- [ ] å®ç°ç­–ç•¥ç›¸å…³æ€§åˆ†æ
- [ ] å®ç°ç»©æ•ˆæŒ‡æ ‡è®¡ç®—
- [ ] åˆ›å»ºä¼˜åŒ–API
- [ ] æ·»åŠ æ•°æ®åº“è¿ç§»

### å‰ç«¯å¼€å‘

- [ ] åˆ›å»ºç­–ç•¥åˆ—è¡¨é¡µé¢
- [ ] åˆ›å»ºç­–ç•¥è¡¨å•ç»„ä»¶
- [ ] åˆ›å»ºç­–ç•¥è¯¦æƒ…ç»„ä»¶
- [ ] åˆ›å»ºä¼˜åŒ–é…ç½®ç»„ä»¶
- [ ] åˆ›å»ºä¼˜åŒ–è¿›åº¦ç»„ä»¶
- [ ] åˆ›å»ºä¼˜åŒ–ç»“æœç»„ä»¶
- [ ] åˆ›å»ºç»©æ•ˆå¯¹æ¯”å›¾è¡¨
- [ ] åˆ›å»ºå‚æ•°æ•æ„Ÿæ€§å›¾è¡¨
- [ ] åˆ›å»ºç›¸å…³æ€§çŸ©é˜µå›¾è¡¨
- [ ] åˆ›å»ºä¼˜åŒ–æœåŠ¡API

### æµ‹è¯•

- [ ] ç¼–å†™å•å…ƒæµ‹è¯•
- [ ] ç¼–å†™é›†æˆæµ‹è¯•
- [ ] ç¼–å†™æ€§èƒ½æµ‹è¯•
- [ ] è¿è¡Œæ‰€æœ‰æµ‹è¯•
- [ ] åˆ›å»ºæµ‹è¯•æŠ¥å‘Š

---

**è®¡åˆ’åˆ›å»ºæ—¶é—´**: 2026-02-14  
**è®¡åˆ’ç‰ˆæœ¬**: v1.0  
**çŠ¶æ€**: å¾…å®æ–½