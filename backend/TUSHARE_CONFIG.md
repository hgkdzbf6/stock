# Tushare Token é…ç½®è¯´æ˜

## âœ… Token å·²é…ç½®

Tushare Token å·²æˆåŠŸé…ç½®åˆ° `backend/.env` æ–‡ä»¶ä¸­ï¼Œ**ä¸ä¼šè¢«æäº¤åˆ°Git**ã€‚

### é…ç½®ä½ç½®
- **å®é™…é…ç½®æ–‡ä»¶**: `backend/.env` (å·²åœ¨.gitignoreä¸­ï¼Œä¸ä¼šæäº¤)
- **é…ç½®æ¨¡æ¿**: `backend/.env.example` (ä¼šæäº¤åˆ°Gitï¼Œä¾›å…¶ä»–å¼€å‘è€…å‚è€ƒ)

## ğŸ“ å½“å‰é…ç½®

### backend/.env (å®é™…é…ç½®)
```bash
# æ•°æ®æºé…ç½®
TUSHARE_TOKEN=bcfab7bccd8e066c2290c423bdb2d399b34690884be7b1ae05db1011
DATA_SOURCE=akshare
```

### backend/.env.example (é…ç½®æ¨¡æ¿)
```bash
# æ•°æ®æºé…ç½®
TUSHARE_TOKEN=your_tushare_token_here
DATA_SOURCE=akshare
```

## ğŸ”„ åˆ‡æ¢æ•°æ®æº

### ä½¿ç”¨ Tushare æ•°æ®æº

1. ä¿®æ”¹ `backend/.env` æ–‡ä»¶ï¼š
```bash
DATA_SOURCE=tushare
```

2. é‡å¯åç«¯æœåŠ¡ï¼š
```bash
cd backend
pkill -f "python main.py"
source venv/bin/activate
python main.py
```

3. æŸ¥çœ‹æ—¥å¿—ç¡®è®¤ï¼š
```
åˆå§‹åŒ–MarketServiceï¼Œæ•°æ®æº: tushare
```

### ä½¿ç”¨ Akshare æ•°æ®æºï¼ˆé»˜è®¤ï¼‰

Akshare ä¸éœ€è¦ tokenï¼Œä½†å¯ä»¥é€šè¿‡é…ç½®åˆ‡æ¢ï¼š

1. ä¿®æ”¹ `backend/.env` æ–‡ä»¶ï¼š
```bash
DATA_SOURCE=akshare
```

2. é‡å¯åç«¯æœåŠ¡
3. æŸ¥çœ‹æ—¥å¿—ç¡®è®¤ï¼š
```
åˆå§‹åŒ–MarketServiceï¼Œæ•°æ®æº: akshare
```

## ğŸ›¡ï¸ å®‰å…¨è¯´æ˜

1. **Token å®‰å…¨æ€§**
   - Token å­˜å‚¨åœ¨ `.env` æ–‡ä»¶ä¸­
   - `.env` æ–‡ä»¶å·²åœ¨ `.gitignore` ä¸­é…ç½®
   - **ä¸ä¼šæäº¤åˆ° Git ä»“åº“**
   - å…¶ä»–å¼€å‘è€…æ— æ³•çœ‹åˆ°ä½ çš„ token

2. **å…±äº«é…ç½®**
   - `.env.example` æ–‡ä»¶åªåŒ…å«é…ç½®ç¤ºä¾‹
   - å…¶ä»–å¼€å‘è€…éœ€è¦è‡ªå·±è·å– token å¹¶é…ç½®

## ğŸ“‹ è·å– Tushare Token

å¦‚éœ€ä½¿ç”¨ Tushare æ•°æ®æºï¼š

1. è®¿é—® Tushare å®˜ç½‘ï¼šhttps://tushare.pro/
2. æ³¨å†Œè´¦å·å¹¶ç™»å½•
3. è¿›å…¥ä¸ªäººä¸­å¿ƒ
4. åœ¨ API Token é¡µé¢è·å– token
5. å°† token é…ç½®åˆ° `backend/.env` æ–‡ä»¶

## ğŸ” é…ç½®éªŒè¯

### æ£€æŸ¥é…ç½®æ˜¯å¦ç”Ÿæ•ˆ

1. æŸ¥çœ‹åç«¯å¯åŠ¨æ—¥å¿—ï¼š
```bash
tail -f backend/backend.log
```

2. æŸ¥æ‰¾æ—¥å¿—ä¸­çš„æ•°æ®æºä¿¡æ¯ï¼š
```
åˆå§‹åŒ–MarketServiceï¼Œæ•°æ®æº: akshare  # æˆ– tushare
```

### æµ‹è¯•æ•°æ®è·å–

```bash
# æµ‹è¯•è‚¡ç¥¨åˆ—è¡¨
curl "http://localhost:8000/api/v1/stocks?page=1&page_size=5"

# æµ‹è¯•æœç´¢
curl "http://localhost:8000/api/v1/stocks/search/å¹³å®‰"

# æµ‹è¯•è‚¡ç¥¨è¯¦æƒ…
curl "http://localhost:8000/api/v1/stocks/000001"
```

## ğŸ“Š æ•°æ®æºå¯¹æ¯”

### Akshare
- âœ… å…è´¹ï¼Œæ— éœ€ token
- âœ… æ•°æ®å…¨é¢ï¼Œè¦†ç›–å¤šä¸ªå¸‚åœº
- âœ… æ›´æ–°åŠæ—¶
- âš ï¸ éƒ¨åˆ†æ¥å£æœ‰é¢‘ç‡é™åˆ¶
- âš ï¸ å¯èƒ½å› ç½‘ç»œé—®é¢˜è®¿é—®å¤±è´¥

### Tushare
- âœ… æ•°æ®è´¨é‡é«˜
- âœ… API ç¨³å®šæ€§å¥½
- âœ… æœ‰å®Œæ•´çš„æ•°æ®æ–‡æ¡£
- âš ï¸ éœ€è¦ token
- âš ï¸ å…è´¹ç”¨æˆ·æœ‰ç§¯åˆ†é™åˆ¶
- âš ï¸ éƒ¨åˆ†é«˜çº§æ¥å£éœ€è¦ä»˜è´¹

## ğŸ”§ æ•…éšœæ’æŸ¥

### é—®é¢˜1ï¼šæ•°æ®è·å–å¤±è´¥
**ç—‡çŠ¶**ï¼šAPI è¿”å› mock æ•°æ®

**åŸå› **ï¼š
- Akshare å› ä»£ç†æˆ–ç½‘ç»œé—®é¢˜æ— æ³•è®¿é—®
- Tushare token æ— æ•ˆæˆ–ç§¯åˆ†ä¸è¶³

**è§£å†³**ï¼š
1. æ£€æŸ¥åç«¯æ—¥å¿—ä¸­çš„é”™è¯¯ä¿¡æ¯
2. å°è¯•åˆ‡æ¢æ•°æ®æº
3. æ£€æŸ¥ç½‘ç»œè¿æ¥
4. éªŒè¯ Tushare token æ˜¯å¦æœ‰æ•ˆ

### é—®é¢˜2ï¼šé…ç½®æœªç”Ÿæ•ˆ
**ç—‡çŠ¶**ï¼šæ—¥å¿—æ˜¾ç¤ºæ•°æ®æºä¸é…ç½®ä¸ä¸€è‡´

**è§£å†³**ï¼š
1. ç¡®è®¤ `backend/.env` æ–‡ä»¶å­˜åœ¨
2. ç¡®è®¤ `DATA_SOURCE` é…ç½®æ­£ç¡®
3. é‡å¯åç«¯æœåŠ¡
4. æ¸…é™¤ Python ç¼“å­˜ï¼š`find . -type d -name __pycache__ -exec rm -rf {} +`

### é—®é¢˜3ï¼šToken è¢«æäº¤åˆ° Git
**é¢„é˜²**ï¼š
1. æ£€æŸ¥ `.gitignore` æ˜¯å¦åŒ…å« `.env`
2. å¦‚æœå·²æäº¤ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ä» Git å†å²ä¸­ç§»é™¤ï¼š
```bash
git rm --cached backend/.env
git commit -m "Remove .env from git"
```

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹ï¼š
- åç«¯æ—¥å¿—ï¼š`backend/backend.log`
- API æ–‡æ¡£ï¼šhttp://localhost:8000/docs
- æµ‹è¯•è¯´æ˜ï¼š`TESTING_INSTRUCTIONS.md`